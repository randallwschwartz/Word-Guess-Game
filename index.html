<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Hangman Game</title>

    <!-- Added link to the jQuery Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Added a link to Bootstrap-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

  </head>
  <body>

    <div class="jumbotron">
      <h1 class="text-center">Archer: Hangman!</h1>
      <h2 class="text-center">Press Any Key to Get Started!</h2>
    </div>

    <div class="text-center" id="game">
      <!-- <h1>Archer: Hangman!</h1>
      <p>Press any key to get started!</p> -->
      <p>Wins</p>
      <p id="numWins"></p>
      <p>Current Word</p>
      <p id="currentWord"></p>
      <p>Number of Guesses Remaining</p>
      <p id="guessesRemaining"></p>
      <p>Letters Already Guessed</p>
      <p id="lettersGuessed"></p>

    </div>

    <script>

      var wins = document.getElementById("numWins");
      var displayedWord = document.getElementById("currentWord");
      var guessesRem = document.getElementById("guessesRemaining");
      var wrongGuesses = document.getElementById("lettersGuessed");

      // wins.textContent = 0;
      // guessesRem.textContent = 15;
      
      var wordArray = [
        "sterling",
        "mallory",
        "cheryl",
        "pam",
        "cyril",
        "krieger"
      ]

      var wordBlanks = "";
      var wordToGuess = "";
      var lettersInWordToGuess = [];
      var numBlanks = 0;
      displayedWord = [];
      wrongGuesses = [];

      function gameBegin() {
        wins.textContent = 0;
        wrongGuesses.textContent = 0;
        guessesRem = 15;
        displayedWord = [];

        wordToGuess = wordArray[Math.floor(Math.random() * wordArray.length)];
        lettersInWordToGuess = wordToGuess.split("");
        numBlanks = lettersInWordToGuess.length;
        console.log("wordToGuess: " + wordToGuess);
        console.log("lettersInWordToGuess: " + lettersInWordToGuess);
        console.log("numBlanks: " + numBlanks);

        for (var i=0; i < numBlanks; i++) {
          displayedWord.push("_");
        }

        // displayedWord = wordBlanks;
        // displayedWord.textContent = wordBlanks;
        displayedWord.textContent = displayedWord;

        console.log("wordBlanks: " + wordBlanks);
        console.log("blanks and successes: " + displayedWord);

      }
      
      function letterCheck(letter) {
        var letterInWord = false;

        var letter = letter.toLowerCase();

        for(var i = 0; i < numBlanks; i++) {
          if(lettersInWordToGuess[i] === letter) {
            letterInWord = true;
          }
        }

        if(letterInWord) {
          for(i = 0; i < numBlanks; i++){
            if(wordToGuess[i] === letter){
              displayedWord[i] = letter;
              guessesRem--; 

              console.log("letter: " + letter);
              console.log("displayedWord[i]: " + displayedWord[i]);
              console.log("guessesRem: " + guessesRem);
              console.log("-------------------");  
            }
          }
        }
        
        else {
          guessesRem--; 
          wrongGuesses.push(letter);
          console.log("letter: " + letter);
          console.log("guessesRem: " + guessesRem);
          console.log("-------------------");  
        }

        console.log("letterInWord: " + letterInWord);

      }

      function selectionEnd() {
        console.log("blanks and successes: " + displayedWord);
        console.log("letters in word to guess: " + lettersInWordToGuess);

        if(lettersInWordToGuess.join(" ") === displayedWord.join(" ")){
          wins++;
          alert("You win!!");
          // document.getElementById('win-counter').innerHTML = winCounter;
          gameBegin();
        }
        
        else if(guessesRem === 0){
          document.getElementById('loss-counter').innerHTML  = lossCounter ++;
          document.getElementById('wrong-guesses').innerHTML = "";
          alert("you don't have any more guesses");        
          gameBegin();
        }

      }


      gameBegin();

      document.onkeyup = function(event) {

        // Determines which key was pressed.
        var userChoice = event.key.toLowerCase();

        // Alerts the key the user pressed (userGuess).
        alert("User Selection: " + userChoice);
        console.log("User Selection: " + userChoice);

        letterCheck(userChoice);
        selectionEnd();

      }

    </script>
    
  </body>
</html>